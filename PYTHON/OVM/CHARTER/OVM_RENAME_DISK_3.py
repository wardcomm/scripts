import requests
import sys
import urllib3
import ovmclient
import json
import pprint

#variable
user = 'p2906297'
password = 'THem5dax'
baseUri = 'https://ovmdmgr04:7002/ovm/core/wsapi/rest'
client = ovmclient.Client(baseUri, user, password)
repo_name = client.repositories.get_id_by_name('pool07-virt1-repo')
repo_value = (repo_name['value'])
pp = pprint.PrettyPrinter(indent=4)

s = requests.Session()
s.auth=( user, password )
s.verify=False #disables SSL certificate verification
s.headers.update({'Accept': 'application/json', 'Content-Type': 'application/json'})

server_name = sys.argv[1]
# processors = sys.argv[2]
# processors_limit = sys.argv[3]
# processor_cap = sys.argv [4]
print("This is a major test")
# test_url = 'https://ovmdmgr04:7002/ovm/core/wsapi/rest/VmDiskMapping/0004fb0000130000dc39eae9fb04e143'
test_url = 'https://ovmdmgr04:7002/ovm/core/wsapi/rest/VirtualDisk/0004fb0000120000b7f435cb18f66a1a.img'
get_name = s.get(test_url)
print(type(test_url))
print(test_url)
print(type(get_name))
print(get_name)
print(get_name.headers)
print('\n')
chad = get_name.json()
dictionary = json.dumps(chad)
print("hhhhhhhhmmmmmmmmm")
print(dictionary)
print(type(dictionary))
rename = "AIRWOLF"
# dictionary['id']['name'] = rename
# data_put = s.put(test_url, data=json.dumps(dictionary),stream=True)
d = json.loads(dictionary)
print("This is what i am printing")
print(d['name'])
print(type(d))
rename ="AIRWOLF"
d['name'] = rename
print("modified data")
print(d)
data_put = s.put(test_url, data=json.dumps(d),stream=True)
# pp.pprint(dictionary)
# print(dictionary)
print("This is chad")
print(chad)
print("This is type of chad")
print(type(chad))
print("this is when it change data of chad")
diskname = (chad['id']['name'])
print("this is disk name")
print(diskname)
rename = "AIRWOLF"
# chad['virtualDiskId']['name'] = rename
# dictionary['id']['name'] = rename
print("this is rename")
print(rename)
print('\n')
print("This has the correct data")
print(chad)
# data_x = {['virtualDiskId']['name'] : 'AIRWORLF'}
data_put = s.put(test_url, data=json.dumps(chad),stream=True)
s.put(test_url, data=chad)
print('\n')
print("this is data_put")
print(data_put)
print('\n')
print("this is after put statement")
print('\n')
print(type(data_put))
print("this is is after what type")
print("this is before headers")
print(data_put.headers)


print('\n')
print("this is before content")
print('\n')
print(data_put.content)
print('\n')
print("this is before status code")
print(data_put.status_code)
print(data_put.history)
print(data_put.url)
print(data_put.raw)
# # real_data["memory"] = new_memory
# # real_data["memoryLimit"] = new_memory_max
# # data_put = s.put(url,data=json.dumps(real_data))

# get_json = json.dumps(get_name)
# get_data = s.get(test_url)
# chad = get_data.json()
# # print(get_data)
# diskname = (get_name['virtualDiskId']['name'])
# print(diskname)
# print(get_json)
# repo_id = "/0004fb000003000038a326c390954c23/"
# vm_id = client.vms.get_id_by_name(server_name)
# print(vm_id)
# vm_value = str(vm_id['value'])
# print(vm_value)
# url = baseUri+'/Vm/' + vm_value + '/VmDiskMapping'
# repo_url = baseUri + '/Repository' + repo_id + 'VirtualDisk/'+ 'id'
# get_data = s.get(url)
# get_repo_data = s.get(repo_url)
# pp.pprint(get_data)
# print(type(get_data))
# pp.pprint(get_repo_data)
# print(type(get_repo_data))
# print("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY")
# chad = get_data.json()
# vicky = get_repo_data.json()
# print(".json output")
# print(type(chad))
# print(type(vicky))
# chad_dict = json.dumps(chad)
# print("This is a list")
# cool = json.loads(chad_dict)
# print(type(cool))
# array = cool[0]
# print("What is this")
# print(array)
# print("now a dict")
# print(type(array))
# print('\n')
# disk_id = (array['virtualDiskId']['value'])
# diskname = (array['virtualDiskId']['name'])

# # diskname = new_disk_name
# print(disk_id)
# print(diskname)
# next = str(int('0') + 1)
# rename = "disk_" + server_name + "_" + next

# # def drive_name():
# #     rename = "disk_" + server_name + "_" + next
# #     print(rename)
# #     return
# print("This is a function")
# # drive_name()
# # new_disk_name = drive_name()
# print("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^")


# array["virtualDiskId"]["name"] = rename
# print(rename)
# chad = json.dumps(array)
# print(type(chad))
# bob = json.loads(chad)
# print(type(bob))
# print("This is the put below")
# true_data = s.put(url,data=json.dumps(chad))
# print("After put")
# print(type(chad))
# print(type(bob))
# print(type(true_data))
# print(true_data.url)
# print(true_data)
# print(true_data.text)
# print(true_data.content)
# print(true_data.status_code)
# print(true_data.headers)
# print(true_data.history)
# print('\n')
# # chad = s.put(url,data=json.dumps(array, indent = 4 ))
# # print(chad)

# # print(new_drive_name)
# print(array)
# # get_data = s.get(url)
# # print(get_data)
# #MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
# # server_name = sys.argv[1]
# # new_memory = sys.argv[2]
# # new_memory_max = sys.argv[3]

# # vm_id = client.vms.get_id_by_name(server_name)
# # vm_value = str(vm_id['value'])
# # url = baseUri+'/Vm/' + vm_value
# # real_data = client.vms.get_by_id(vm_id)
# # print(real_data)
# # real_data["memory"] = new_memory
# # real_data["memoryLimit"] = new_memory_max
# # data_put = s.put(url,data=json.dumps(real_data))

# #MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
# print("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")
# disk_id = (array['virtualDiskId']['value'])
# print(disk_id)
# disk_name = (array['virtualDiskId']['name'])
# print(disk_name)
# system_name = (array['vmId']['name'])
# print(system_name)
# # some_data = 
# # array['virtualDiskId']["name"] = drive_name
# # print(drive_name)
# # chad = s.put(url,data=json.dumps(some_data, indent = 4 ))
# # print("Did this work")
# # print(type(chad))
# # print(chad)


# # vicky_dict = json.dumps(vicky)
# # print("This is dumps of vm")
# # print(type(chad_dict))
# # print(chad_dict)
# # print('\n')
# # x = chad_dict[1]
# # print("This is the first object in array")
# # print(x)
# # print(type(vicky_dict))
# # print("this is dumps from disks on repository")
# # print(vicky_dict)



# # pp.pprint(chad)
# # print(type(chad))
# print("+++++++++++++++++++++++++++++++++++++++++++++++++++")
# # pp.pprint(vicky)
# # print(type(vicky))
# print("hello")


# pretty_json = json.dumps(chad, indent = 4)
# ugly_json = json.dumps(vicky, indent = 4)
# x = pretty_json[0]
# y = ugly_json[0]
# # print("This is pretty json of json dump of url which vm")
# # print(pretty_json)
# # print("This is ugly json of json dump of disk on repo")
# # print(ugly_json)
# # print("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")
# # print(x)
# # print(y)
# # disk_id_x = (x['virtualDiskId']['value'])
# # print(disk_id_x)
# # disk_name_x = (x['virtualDiskId']['name'])
# # print(disk_name_x)
# # system_name_x = (x['vmId']['name'])
# # print(system_name_x)

# # disk_id = (y['value'])
# # print(disk_id)
# # disk_name = (y['name'])
# # print(disk_name)
# # system_name = (y['vmId']['name'])
# # print(disk_id)
# # print(disk_name)
# # print(system_name)

# print(type(get_data))
# print(get_data)
# print(url)

# print(type(get_repo_data))
# print(get_repo_data)
# print(repo_url)

# pretty_json = json.dumps(url)
# ugly_json = json.dumps(repo_url)
# print(pretty_json)
# print(ugly_json)


# x = pretty_json
# print(x)
# print(type(x))

# pp.pprint(x)
# print(type(x))
# # decoded_json = json.loads(get_data)
# # encoded_json = json.dumps(get_data)

# # decoded_json_repo = json.loads(get_repo_data)
# # encoded_json_repo = json.dumps(get_repo_data)
# # encoded_json_repo_data = encoded_json_repo.json()
# # decoded_json_repo_data = encoded_json_repo.json()
# # pp.pprint(decoded_json)
# # print(type(decoded_json))

# # pp.pprint(encoded_json)
# # print(type(encoded_json))

# # pp.pprint(decoded_json_repo_data)
# # print(type(decoded_json_repo_data))

# # pp.pprint(encoded_json_repo_data)
# # print(type(encoded_json_repo_data))

# # print(get_repo_data)
# # print(type(get_repo_data))
# # print(get_repo_data.content)
# # print(json.dumps(get_repo_data, indent = 4))

# # print(type(pretty_json))


















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































