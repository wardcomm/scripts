---
- hosts: localhost
  tasks:
  # - name: install the latest version of git
  #   yum:
  #     name: git
  #     state: latest

  - name: Adding epel repository
    yum_repository:
      name: epel
      description: EPEL YUM repo
      baseurl: https://download.fedoraproject.org/pub/epel/$releasever/$basearch/

  - name: Adding google repository
    yum_repository:
      name: google-chrome
      description: google chrome YUM repo
      baseurl: http://dl.google.com/linux/chrome/rpm/stable/x86_64
      gpgcheck: yes
      enabled: yes
      gpgkey: https://dl.google.com/linux/linux_signing_key.pub

  - name: install terraform
    command: bash /REPO/scripts/BASH/install_terraform.sh

  - name: install homebrew
    shell: bash /REPO/scripts/BASH/install_homebrew.sh

  - name: install multple apps
    yum:
      name: "{{ item }}"
      state: latest
    loop:

      - chromium
      - google-chrome
    #  - firefox
    #  - yumex
    #  - python-devel
    #  - ansible-lint
    #  - python-pip
    #  - code
    #  - ncdu
    #  - htop
    #  - git2u-all
    #  - perl
    #  - gcc
    #  - dkms
    #  - kernel-devel
    #  - kernel-headers
    #  - make
    #  - bzip2
    #  - wget
    #  - curl
    #  - gettext-devel
    #  - openssl-devel
    #  - perl-CPAN
    #  - perl-devel
    #  - zlib-devel
    #  - screen
    #  - zip
    #  - snapd
    #  - nmap
      - p7zip
    #    - code-insiders

  - name: install multi packages with pip
    pip:
      name:
        - yamllint

  - name: update the system
    yum:
      name: "*"
      state: latest

  - name: clone git repos
    git:
      repo: "{{ item.repo }}"
      dest: /REPO/{{ item.name }}
      force: yes
      clone: yes
      update: yes
    loop:
      - { repo: 'https://github.com/wardcomm/linux_ansible_control.git' , name: 'linux_ansible_control' }
      - { repo: 'https://github.com/wardcomm/windows_update.git' , name: 'windows_update' }
      - { repo: 'https://github.com/wardcomm/windows_pm.git' , name: 'windows_pm' }
      - { repo: 'https://github.com/wardcomm/azure_custom.git' , name: 'azure_custom' }
      - { repo: 'https://github.com/wardcomm/azure_terraform.git' , name: 'azure_terraform' }

  - name: Download chrome browser
    get_url:
      url: https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
      dest: /tmp/google-chrome-stable_current_x86_64.rpm
      mode: 0777

  - name: install chrome
    yum:
      name: /tmp/google-chrome-stable_current_x86_64.rpm
      state: present